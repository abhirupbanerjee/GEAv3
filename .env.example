# ============================================
# GRENADA EA PORTAL - ENVIRONMENT CONFIGURATION
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env
# 2. Replace placeholder values with actual credentials
# 3. NEVER commit .env files to version control
# 4. Keep this file secure (chmod 600 .env)
#
# ============================================

# ============================================
# DEPLOYMENT ENVIRONMENT
# ============================================

# Production environment (default)
NODE_ENV=production

# Development environment (uncomment for local development)
#NODE_ENV=development

# ============================================
# DOMAINS
# ============================================

# Frontend domain (used in Traefik routing)
FRONTEND_DOMAIN=gea.your-domain.com

# ============================================
# COMPUTED URLs
# ============================================

# External service URLs
DMS_URL=https://dms.gea.your-domain.com
GIT_URL=https://git.gea.your-domain.com
CHATBOT_URL=https://your-chatbot-url.com

# Quick links in footer
GOG_URL=https://www.gov.gd/
ESERVICES_URL=https://eservice.gov.gd/
CONSTITUTION_URL=https://grenadaparliament.gd/ova_doc/

# Browser accessible variables (NEXT_PUBLIC_ prefix required for client-side access)
NEXT_PUBLIC_FRONTEND_URL=https://gea.your-domain.com
NEXT_PUBLIC_SITE_NAME=Government of Grenada - EA Portal
NEXT_PUBLIC_SITE_SHORT_NAME=GoG
NEXT_PUBLIC_BASE_DOMAIN=your-domain.com
NEXT_PUBLIC_ABOUT_CONTACT_EMAIL=contact@your-domain.com
NEXT_PUBLIC_COPYRIGHT_YEAR=2026

# Site metadata (server-side)
SITE_NAME=Government of Grenada - EA Portal
CONTACT_EMAIL=contact@your-domain.com
ABOUT_CONTACT_EMAIL=contact@your-domain.com
COPYRIGHT_YEAR=2026

# ============================================
# TRAEFIK CONFIGURATION
# ============================================

# Let's Encrypt SSL certificates
LETS_ENCRYPT_EMAIL=admin@your-domain.com

# Traefik dashboard authentication
TRAEFIK_DASHBOARD_USER=admin

# Generate password hash using:
# echo $(htpasswd -nb admin your_password) | sed -e s/\\$/\\$\\$/g
# Or online: https://hostingcanada.org/htpasswd-generator/
TRAEFIK_DASHBOARD_PASSWORD=$$apr1$$replace$$with-your-hash

# ============================================
# FRONTEND DB CONFIGURATION
# ============================================

# Database credentials
FEEDBACK_DB_HOST=feedback_db
FEEDBACK_DB_PORT=5432
FEEDBACK_DB_NAME=feedback
FEEDBACK_DB_USER=feedback_user

# CRITICAL: Generate a strong password using: openssl rand -base64 32
FEEDBACK_DB_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# ============================================
# EMAIL & TICKETING CONFIGURATION
# ============================================

# SendGrid API Configuration
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.REPLACE_WITH_YOUR_API_KEY
SENDGRID_FROM_EMAIL=noreply@your-domain.com
SENDGRID_FROM_NAME=DTAAdmin

# Service admin email (receives service request notifications)
SERVICE_ADMIN_EMAIL=admin@your-domain.com

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================

# File size limits (in bytes)
MAX_FILE_SIZE=10097152                    # 10MB per file
MAX_TOTAL_UPLOAD_SIZE=50242880           # 50MB total per submission

# Allowed file types (comma-separated, no spaces)
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx,xlsx,xls

# ============================================
# RATE LIMITING CONFIGURATION
# ============================================

# Number of submissions allowed per hour per IP address
GRIEVANCE_RATE_LIMIT=2                   # Grievance submissions (more restrictive)
EA_SERVICE_RATE_LIMIT=10                 # EA service requests

# ============================================
# API CONFIGURATION
# ============================================

# API Base URLs (for email links and API responses)
NEXT_PUBLIC_API_BASE_URL=https://gea.your-domain.com
API_BASE_URL=https://gea.your-domain.com

# ============================================
# ADMIN LOGIN CONFIGURATION
# ============================================

# Admin password (plaintext - hashed during authentication)
# CRITICAL: Use a strong password
ADMIN_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# Optional: Pre-hashed password (bcrypt)
# Generate: node -e "console.log(require('bcryptjs').hashSync('your_password', 10))"
#ADMIN_PASSWORD_HASH=$2b$10$REPLACE_WITH_BCRYPT_HASH

# Admin session secret (used for session encryption)
# Generate using: openssl rand -base64 32
ADMIN_SESSION_SECRET=REPLACE_WITH_RANDOM_SECRET

# ============================================
# SERVICE REQUEST CONFIGURATION
# ============================================

# Entity ID that receives service requests
# Default: AGY-005 (Digital Transformation Agency)
#
# OPTIONAL: This has a default value of AGY-005
# Only set this if you need to change which entity receives service requests
#
# Examples:
#   AGY-002 (Royal Grenada Police Force)
#   MIN-001 (Ministry)
# Future: Can be comma-separated for multiple entities (e.g., AGY-005,AGY-002)
#
# If not set, defaults to AGY-005
NEXT_PUBLIC_SERVICE_REQUEST_ENTITY_ID=AGY-005

# ============================================
# NextAuth - OAuth Authentication
# ============================================
# NextAuth is used for admin/staff authentication via OAuth providers

# NextAuth URL - Your application URL
# Development: http://localhost:3000
# Production: https://gea.your-domain.com
NEXTAUTH_URL=https://gea.your-domain.com

# NextAuth Secret - Used to encrypt JWT tokens
# Generate using: openssl rand -base64 32
# CRITICAL: Keep this secret secure
NEXTAUTH_SECRET=REPLACE_WITH_RANDOM_SECRET

# Google OAuth Configuration
# Setup: https://console.cloud.google.com/
# 1. Create OAuth 2.0 Client ID (Web application)
# 2. Add authorized redirect URI: https://gea.your-domain.com/api/auth/callback/google
# 3. Copy Client ID and Client Secret below
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret

# Microsoft OAuth Configuration (Optional)
# Setup: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
# 1. Register new application
# 2. Add redirect URI: https://gea.your-domain.com/api/auth/callback/microsoft-entra-id
# 3. Create client secret (valid for 24 months)
# Uncomment to enable:
#MICROSOFT_CLIENT_ID=your-microsoft-client-id
#MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
#MICROSOFT_TENANT_ID=common

# ============================================
# EXTERNAL API ACCESS
# ============================================

# API Key for external system access (bots, integrations)
# Generate with: openssl rand -hex 32
# Leave empty to disable external API access
# Endpoint: /api/external/dashboard
EXTERNAL_API_KEY=

# ============================================
# NOTES
# ============================================
#
# PASSWORD GENERATION:
# Use strong passwords with at least 20 characters
# Include uppercase, lowercase, numbers, and symbols
# Tools: https://1password.com/password-generator/
#
# SECURITY CHECKLIST:
# [ ] Changed all default passwords
# [ ] Generated new secret keys
# [ ] Set correct email addresses
# [ ] Updated domain names
# [ ] Set file permissions (chmod 600 .env)
# [ ] Verified .gitignore includes .env*
#
# BACKUP REMINDER:
# Store a copy of this file securely offline!
#
# ============================================
