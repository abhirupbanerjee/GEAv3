# ============================================
# GRENADA EA PORTAL v3 - ENVIRONMENT CONFIGURATION
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env
# 2. Replace ALL placeholder values with actual credentials
# 3. NEVER commit .env files to version control
# 4. Keep this file secure (chmod 600 .env)
#
# Repository: https://github.com/abhirupbanerjee/GEAv3.git
# ============================================

# ============================================
# DEPLOYMENT ENVIRONMENT
# ============================================

# Development environment
DEPLOYMENT_ENV=dev
NODE_ENV=development
LOG_LEVEL=debug

# Production environment (uncomment for production)
#DEPLOYMENT_ENV=prod
#NODE_ENV=production
#LOG_LEVEL=info

# ============================================
# DOMAINS
# ============================================
# IMPORTANT: Replace abhirup.app with your actual domain

BASE_DOMAIN=your-domain.com
FRONTEND_DOMAIN=gea.your-domain.com
WIKI_DOMAIN=wiki.gea.your-domain.com
DMS_DOMAIN=dms.gea.your-domain.com
GIT_DOMAIN=git.gea.your-domain.com
TRAEFIK_DOMAIN=traefik.gea.your-domain.com

# ============================================
# COMPUTED URLs (Auto-constructed)
# ============================================

FRONTEND_URL=https://gea.your-domain.com
WIKI_URL=https://wiki.gea.your-domain.com
DMS_URL=https://dms.gea.your-domain.com
GIT_URL=https://git.gea.your-domain.com
HELPDESK_URL=https://helpdesk.gea.your-domain.com
CHATBOT_URL=https://your-chatbot-url.vercel.app/
SERVICES_URL=https://services.gea.your-domain.com

# Quick links in footer
GOG_URL=https://www.gov.gd/
ESERVICES_URL=https://eservice.gov.gd/
SERVICES_URL=https://services.gov.gd/
CONSTITUTION_URL=https://grenadaparliament.gd/ova_doc/

# Browser accessible variables (NEXT_PUBLIC_ prefix)
NEXT_PUBLIC_FRONTEND_URL=https://gea.your-domain.com
NEXT_PUBLIC_SITE_NAME=Government of Grenada - EA Portal
NEXT_PUBLIC_SITE_SHORT_NAME=Government of Grenada
NEXT_PUBLIC_BASE_DOMAIN=your-domain.com

# Site metadata
SITE_NAME=Government of Grenada - EA Portal
CONTACT_EMAIL=your-email@gov.gd
ABOUT_CONTACadmin@dta.gov.gdT_EMAIL=about@gov.gd
COPYRIGHT_YEAR=2025

# ============================================
# TRAEFIK CONFIGURATION (Reverse Proxy & SSL)
# ============================================

# Let's Encrypt SSL certificates
# IMPORTANT: Use a valid email for SSL certificate notifications
LETS_ENCRYPT_EMAIL=your-email@gov.gd

# Traefik dashboard authentication
TRAEFIK_DASHBOARD_USER=admin

# Generate password hash using one of these methods:
# Method 1: Using htpasswd command
#   echo $(htpasswd -nb admin your_password) | sed -e s/\\$/\\$\\$/g
# Method 2: Online generator
#   https://hostingcanada.org/htpasswd-generator/
# IMPORTANT: Replace with your generated hash
TRAEFIK_DASHBOARD_PASSWORD=$$apr1$$replace$$with-your-generated-hash

# ============================================
# DATABASE CONFIGURATION (PostgreSQL 15)
# ============================================

# Database connection details
FEEDBACK_DB_HOST# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site
# 4. Copy the sitekey and secret below

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE
=feedback_db
FEEDBACK_DB_PORT=5432
FEEDBACK_DB_NAME=feedback
FEEDBACK_DB_USER=feedback_user

# CRITICAL: Generate a strong password (20+ characters recommended)
# Use: openssl rand -base64 32
FEEDBACK_DB_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# Optional: Full connection string (uncomment if needed)
#DATABASE_URL=postgresql://feedback_user:REPLACE_WITH_STRONG_PASSWORD@feedback_db:5432/feedback



# ============================================
# SENDGRID EMAIL CONFIGURATION
# ============================================

# SendGrid API Configuration
# Get API key from: https://app.sendgrid.com/settings/api_keys
# CRITICAL: Replace with your SendGrid API key
SENDGRID_API_KEY=SG.REPLACE_WITH_YOUR_SENDGRID_API_KEY
SENDGRID_FROM_EMAIL=noreply@gov.gd
SENDGRID_FROM_NAME=GEA Portal

# Service admin email (receives low rating alerts)
SERVICE_ADMIN_EMAIL=admin@gov.gd
REPLY_TO_EMAIL=admin@gov.gd

# ============================================
# SENDGRID EMAIL CONFIGURATION
# ============================================

# SendGrid API Configuration
# Get API key from: https://app.sendg

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================

# File size limi# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site
# 4. Copy the sitekey and secret below

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE
ts (in bytes)
MAX_FILE_SIZE=5242880                    # 5MB per file
MAX_TOTAL_UPLOAD_SIZE=26214400          # 25MB total per submission

# Allowed file types (comma-separated, no spaces)
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,gif,doc,docx,xls,xlsx

# ============================================
# RATE LIMITING CONFIGURATION
# ============================================

# Number of submissions allowed per hour per IP address
FEEDBACK_RATE_LIMIT=5                    # Feedback submissions
GRIEVANCE_RATE_LIMIT=3                   # Grievance submissions
EA_SERVICE_RATE_LIMIT=5                  # EA service requests

# ============================================
# SERVICE REQUEST CONFIGURATION
# ============================================

# Entity ID that receives service requests
# Default: AGY-005 (Digital Transformation Agency)
# To change which entity receives service requests, update this value
# Example: AGY-002 (Royal Grenada Police Force), MIN-001 (Ministry), etc.
# Future: Can be comma-separated for multiple entities (e.g., AGY-005,AGY-002)
NEXT_PUBLIC_SERVICE_REQUEST_ENTITY_ID=AGY-005

# ============================================
# API CONFIGURATION
# ============================================

# API Base URLs (used in email links and API responses)
API_BASE_URL=https://gea.your-domain.com
NEXT_PUBLIC_API_BASE_URL=https://gea.your-domain.com

# ============================================
# EXTERNAL API ACCESS
# ============================================

# API Key for external system access (bots, integrations)
# Generate with: openssl rand -hex 32
# Leave empty to disable external API access
# Endpoint: /api/external/dashboard
EXTERNAL_API_KEY=

# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site
# 4. Copy the sitekey and secret below

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE

# 4. Copy the sitekey and secret below
# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site
# 4. Copy the sitekey and secret below

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE

# ============================================
# ADMIN AUTHENTICATION
# ============================================

# Admin password (plaintext - will be hashed during authentication)
# CRITICAL: Use a strong password with:
# - Minimum 8 characters
# - At least one uppercase letter
# - At least one lowercase letter
# - At least one number
# - At least one special character
ADMIN_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# Optional: Pre-hashed password (bcrypt hash)
# Generate using: node -e "console.log(require('bcryptjs').hashSync('your_password', 10))"
#ADMIN_PASSWORD_HASH=$2b$10$REPLACE_WITH_BCRYPT_HASH

# Admin session secret (used for session encryption)
# Generate using: openssl rand -base64 32
# CRITICAL: Keep this secret secure
ADMIN_SESSION_SECRET=REPLACE_WITH_RANDOM_SECRET_KEY

# ============================================
# NextAuth - OAuth Authentication
# ============================================
# NextAuth is used for admin/staff authentication via OAuth providers
# Setup guide: NEXTAUTH_SETUP_GUIDE.md

# NextAuth URL - Your application URL
# Development: http://localhost:3000
# Production: https://gea.your-domain.com
NEXTAUTH_URL=https://gea.your-domain.com

# NextAuth Secret - Used to encrypt JWT tokens
# Generate using: openssl rand -base64 32
# CRITICAL: Keep this secret secure and never share it
NEXTAUTH_SECRET=REPLACE_WITH_RANDOM_SECRET_KEY

# Google OAuth Configuration
# Setup: https://console.cloud.google.com/
# 1. Create OAuth 2.0 Client ID (Web application)
# 2. Add authorized redirect URI: https://gea.your-domain.com/api/auth/callback/google
# 3. Copy Client ID and Client Secret below
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Microsoft OAuth Configuration (Optional)
# Setup: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
# 1. Register new application
# 2. Add redirect URI: https://gea.your-domain.com/api/auth/callback/microsoft-entra-id
# 3. Create client secret (valid for 24 months)
# Uncomment to enable:
#MICROSOFT_CLIENT_ID=your-microsoft-client-id
#MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
#MICROSOFT_TENANT_ID=common

# ============================================
# SECURITY NOTES
# ============================================
#
# PASSWORD GENERATION:
# - Use strong passwords with at least 20 characters
# - Include uppercase, lowercase, numbers, and symbols
# - Never reuse passwords across services
# - Tools:
#   - https://1password.com/password-generator/
#   - openssl rand -base64 32
#
# KEY GENERATION COMMANDS:
# - Database password: openssl rand -base64 32
# - Session secret: openssl rand -base64 32
# - Admin password: Use a password manager
#
# SECURITY CHECKLIST:
# [ ] Changed all default passwords
# [ ] Generated new secret keys
# [ ] Set correct email addresses
# [ ] Updated domain names
# [ ] Set file permissions: chmod 600 .e# ============================================
# CAPTCHA CONFIGURATION (hCaptcha)
# ============================================

# Get your hCaptcha keys from: https://www.hcaptcha.com
# Steps:
# 1. Go to https://www.hcaptcha.com
# 2. Sign up (free tier available)
# 3. Create a new site
# 4. Copy the sitekey and secret below

NEXT_PUBLIC_HCAPTCHA_SITEKEY=YOUR_HCAPTCHA_SITEKEY_HERE
HCAPTCHA_SECRET=YOUR_HCAPTCHA_SECRET_HERE
nv
# [ ] Verified .gitignore includes .env*
# [ ] Tested database connection
# [ ] Tested SendGrid email sending
# [ ] Configured hCaptcha keys
# [ ] Set up SSL certificate email notifications
#
# BACKUP REMINDER:
# Store a secure copy of this file offline!
# Use a password manager or encrypted storage.
#
# ============================================

# ============================================
# QUICK SETUP GUIDE
# ============================================
#
# 1. Clone repository:
#    git clone https://github.com/abhirupbanerjee/GEAv3.git
#    cd GEAv3
#
# 2. Copy this file:
#    cp .env.example .env
#
# 3. Generate passwords:
#    openssl rand -base64 32  # For DB password
#    openssl rand -base64 32  # For session secret
#
# 4. Update all REPLACE_WITH_* values in .env
#
# 5. Build and run:
#    docker-compose build
#    docker-compose up -d
#
# 6. Initialize database:
#    docker cp database/01-init-db.sh feedback_db:/tmp/
#    docker exec -it feedback_db /bin/bash /tmp/01-init-db.sh
#
# 7. Verify deployment:
#    docker-compose ps
#    docker-compose logs -f frontend
#
# For detailed instructions, see: docs/index.md
#
# ============================================
